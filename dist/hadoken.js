!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hadoken=e():t.Hadoken=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";r.r(e);var n=function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function o(t,e,r){var o={timestamp:t.timestamp,state:n({},t.state)};return t.state[e]?(o.state[r]=t.state[e],delete o.state[e],o):o}function i(t,e){var r=t.state,n=e.state?e.state:e,o=Object.keys(r),i=Object.keys(n);return!(o.length!==i.length||o.some(function(t){return-1===i.indexOf(t)}))}function a(t,e){return{scene:t,config:e,rawHistory:[{timestamp:Date.now(),state:{}}],processedHistory:[]}}var s=function(){return(s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},u=function(){function t(t,e){this.state=a(t,e),t.input.keyboard.on("keydown",this.keydown,this),t.input.keyboard.on("keyup",this.keyup,this),t.events.on("preupdate",this.preupdate,this)}return t.prototype.preupdate=function(){for(var t=this.state.config.coalesseFn||function(t){return t},e=this.state.processedHistory.length;e<this.state.rawHistory.length;e++){var r=this.state.rawHistory[e],n=t(r,r.timestamp),o=this.state.config.filters,i=o?o(n):n;this.state.processedHistory.push(i)}},t.prototype.keydown=function(t){var e,r=this.state.config.keymapFn(t.keyCode);if(r){var n=Date.now(),o=this.state.rawHistory.slice(-1)[0],a={timestamp:n,state:s((e={},e[r]={pressed:n,meta:t.keyCode},e),o.state)};i(a,o)||this.state.rawHistory.push(a)}},t.prototype.keyup=function(t){var e=this.state.config.keymapFn(t.keyCode);if(e){var r=this.state.rawHistory.slice(-1)[0],n=s({},r.state);if(delete n[e],!i(r,n)){var o={timestamp:Date.now(),state:n};this.state.rawHistory.push(o)}}},t.prototype.lastState=function(){return 0===this.state.processedHistory.length?null:this.state.processedHistory.slice(-1)[0]},t}();var c=function(){return(c=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},f={"down+left":["down","left"],"down+right":["down","right"],"up+left":["up","left"],"up+right":["up","right"]};function p(t,e){var r=c({},t.state),n=function(t){return!!r[t]};return Object.keys(f).forEach(function(t){(function(t){return t.every(n)})(f[t])&&(f[t].forEach(function(t){return delete r[t]}),r[t]={pressed:e,meta:null})}),{timestamp:t.timestamp,state:r}}var l,d=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h=Phaser.Input.Keyboard.KeyCodes,y=((l={})[h.DOWN]="down",l[h.UP]="up",l[h.RIGHT]="right",l[h.LEFT]="left",l[h.A]="punch:light",l[h.O]="punch:hard",l[h.E]="kick:light",l[h.U]="kick:hard",l),w=function(t){function e(){var e=t.call(this,"scene1")||this;return e.facing="right",console.log(e),e}return d(e,t),e.prototype.create=function(){var t=this;this.hadoken=new u(this,{bufferLimitType:"time",bufferLimit:500,keymapFn:function(t){return function(e){return t[e]||null}}(y),coalesseFn:p,filters:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduce(function(t,e){return e(t)},e)}}(function(t){return function(e){var r=t(),n=c({},e,{state:c({},e.state)});return n="right"===r?o(n=o(n=o(n=o(n=o(n=o(n,"right","forward"),"down+right","down+forward"),"up+right","up+forward"),"left","backward"),"down+left","down+backward"),"up+left","up+backward"):o(n=o(n=o(n=o(n=o(n=o(n,"left","forward"),"down+left","down+forward"),"up+left","up+forward"),"right","backward"),"down+right","down+backward"),"up+right","up+backward")}}(function(){return t.facing}))})},e.prototype.update=function(){var t=this.hadoken.lastState();t&&t!==this.ls&&(this.ls=t,console.log(Object.keys(t.state)))},e}(Phaser.Scene),g={type:Phaser.AUTO,parent:"phaser-display",backgroundColor:"0x9a9a9a",width:800,height:600,scene:[w],input:{gamepad:!0}};new Phaser.Game(g)}])});